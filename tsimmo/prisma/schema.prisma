generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}
model User {
  id        Int      @id @default(autoincrement())
  name      String
  email     String   @unique
  password  String
  role      Role     @default(USER)
  createdAt DateTime @default(now())
}

enum Role {
  ADMIN
  PROPRIETAIRE
  LOCATAIRE
  RECOUVREUR
  USER
}




model T_Commune {
  CodeVille      Int    @db.TinyInt
  CodeCommune    Int    @id @default(autoincrement()) @db.SmallInt
  LibelleCommune String @db.VarChar(50)
}

model T_CompteLocataire {
  IndexOp          BigInt   @id @default(autoincrement())
  CodeBail         BigInt
  DateOperation    DateTime @db.DateTime(0)
  LibelleOperation String   @db.VarChar(300)
  Debit            Decimal  @db.Decimal(18, 0)
  Credit           Decimal  @db.Decimal(18, 0)
}

model T_FormeJuridique {
  CodeFormeJuridique    String @id @db.VarChar(4)
  LibelleFormeJuridique String @db.VarChar(35)
}

model T_ModePaiement {
  CodeModePaiement    Int    @id @default(autoincrement()) @db.TinyInt
  LibelleModePaiement String @db.VarChar(50)
}

model T_Module {
  CodeModule Int    @id @default(autoincrement()) @db.TinyInt
  NumOrdre   Int    @db.TinyInt
  NomModule  String @db.VarChar(100)
  DescModule String @db.VarChar(200)
  ImgModule  String @db.VarChar(50)
}

model T_OperPlateForme {
  LoginOp    String @db.VarChar(10)
  PlateForme String @db.VarChar(17)
  CodeGroupe String @db.VarChar(100)
  RespoOpBq  String @db.VarChar(1)

  @@id([LoginOp, PlateForme])
}

model T_Operateur {
  LoginOp        String   @id @db.VarChar(10)
  MotPasseOp     String   @db.VarChar(50)
  TitreOperateur String   @db.VarChar(5)
  NomOperateur   String   @db.VarChar(25)
  PrenOperateur  String   @db.VarChar(60)
  DateNaisOp     DateTime @db.DateTime(0)
  LieuNaisOp     String   @db.VarChar(50)
  FonctOperateur String   @db.VarChar(100)
  Indicatif      String   @db.VarChar(3)
  TelOperateur   String   @db.VarChar(20)
  DernTentative  String   @db.VarChar(19)
  DernPoste      String   @db.VarChar(100)
  DernAuthentif  DateTime @db.DateTime(0)
  DernSystem     String   @db.VarChar(50)
  DateSaisie     DateTime @db.DateTime(0)
  DateModif      DateTime @db.DateTime(0)
  Operateur      String   @db.VarChar(10)
}

model T_ParamSms {
  PlateForme     String @id @db.VarChar(50)
  CodeConnexion  String @db.VarChar(50)
  CodeExpediteur String @db.VarChar(11)
}

model T_ParamSociete {
  CodeSociete Int    @id @default(autoincrement()) @db.TinyInt
  RaisonSoc   String @db.VarChar(100)
  UrlDoc      String @db.VarChar(100)
  UrlMaj      String @db.VarChar(100)
}

model T_Pays {
  CodePays    Int    @id @default(autoincrement()) @db.TinyInt
  LibellePays String @db.VarChar(50)
  Nationalite String @db.VarChar(50)
}

model T_Skin {
  CodeSkin        String @id @db.VarChar(3)
  LibelleSkin     String @db.VarChar(50)
  DescriptionSkin String @db.VarChar(50)
  CouleurSkin     String @db.VarChar(50)
  TexteSkin       String @db.VarChar(50)
}

model T_SmsSortant {
  Id           BigInt @id @default(autoincrement())
  Destinataire String @db.VarChar(20)
  Message      String @db.VarChar(1000)
  Operateur    String @db.VarChar(10)
}

model T_TypePieceId {
  CodePieceId    String @id @db.VarChar(5)
  LibellePieceId String @db.VarChar(50)
  LongNumId      Int    @db.TinyInt
}

model T_Ville {
  CodeVille    Int    @id @default(autoincrement()) @db.TinyInt
  CodePays     Int    @db.TinyInt
  LibelleVille String @db.VarChar(50)
}

model Tim_BailLocation {
  CodeBail        Int       @id @default(autoincrement())
  CodeLocation    Int
  DureeBail       Int       @db.TinyInt
  DebutBail       DateTime  @db.DateTime(0)
  BailRenouvel    String    @db.VarChar(1)
  CodeParticulier Int
  CodeEnt         Int
  BailTermine     String    @db.VarChar(1)
  DateFin         DateTime? @db.DateTime(0)
  Motif           String    @db.VarChar(100)
  CodeBon         Int
  DateSaisie      DateTime  @db.DateTime(0)
  DateModif       DateTime  @db.DateTime(0)
  Operateur       String    @db.VarChar(10)
  ModeFacturation String    @db.VarChar(4)
}

model Tim_BilanPeriode {
  CodePropriete       Int       @db.SmallInt
  Periode             String    @db.VarChar(7)
  DebutPeriode        DateTime  @db.DateTime(0)
  FinPeriode          DateTime? @db.DateTime(0)
  LoyerPeriode        Decimal   @db.Decimal(18, 0)
  LoyerHorsPeriode    Decimal   @db.Decimal(18, 0)
  ChargePeriode       Decimal   @db.Decimal(18, 0)
  ChargeHorsPeriode   Decimal   @db.Decimal(18, 0)
  Caution             Decimal   @db.Decimal(18, 0)
  AutreFraisRembours  Decimal   @db.Decimal(18, 0)
  AutreMontantProprio Decimal   @db.Decimal(18, 0)
  Deduction           Decimal   @db.Decimal(18, 0)
  Operateur           String    @db.VarChar(10)

  @@id([CodePropriete, Periode])
}

model Tim_BonSortie {
  CodeBon        Int      @id @default(autoincrement())
  NomBenef       String   @db.VarChar(80)
  QualiteBenef   String   @db.VarChar(50)
  ContactBenef   String   @db.VarChar(11)
  OperateurBenef String   @db.VarChar(10)
  CaisseSortie   String   @db.VarChar(10)
  DateSaisie     DateTime @db.DateTime(0)
  Operateur      String   @db.VarChar(10)
}

model Tim_Brouillard {
  Operateur        String   @db.VarChar(10)
  DateOperation    DateTime @db.DateTime(0)
  LibelleOperation String   @db.VarChar(200)
  Entree           Decimal  @db.Decimal(18, 0)
  Sortie           Decimal  @db.Decimal(18, 0)
  Solde            Decimal  @db.Decimal(18, 0)

  @@id([Operateur, DateOperation])
}

model Tim_Caisse {
  LoginOp        String    @db.VarChar(10)
  DateOuverture  DateTime  @db.DateTime(0)
  SoldeOuverture Decimal   @db.Decimal(18, 0)
  DateFermeture  DateTime? @db.DateTime(0)
  SoldeFermeture Decimal?  @db.Decimal(18, 0)
  SoldePhysique  Decimal?  @db.Decimal(18, 0)
  MontVerse      Decimal   @db.Decimal(18, 0)

  @@id([LoginOp, DateOuverture])
}

model Tim_Carte {
  SnCarte      String   @id @db.VarChar(8)
  CodeBail     Int
  NumLock      String   @db.VarChar(13)
  DateCreation DateTime @db.DateTime(0)
  DateMaj      DateTime @db.DateTime(0)
  CarteActive  String   @db.VarChar(1)
}

model Tim_ChargeBail {
  CodeBail  Int
  NumCharge Int @db.TinyInt

  @@id([CodeBail, NumCharge])
}

model Tim_ChargesLocation {
  CodeLocation  Int
  NumCharge     Int     @db.TinyInt
  LibelleCharge String  @db.VarChar(50)
  MontChargeHT  Decimal @db.Decimal(18, 0)

  @@id([CodeLocation, NumCharge])
}

model Tim_ConditionFinanciere {
  CodeCondition    Int      @id @default(autoincrement()) @db.SmallInt
  LibelleCondition String   @db.VarChar(50)
  DateSaisie       DateTime @db.DateTime(0)
  DateModif        DateTime @db.DateTime(0)
  Operateur        String   @db.VarChar(10)
}

model Tim_ConditionFrais {
  CodeCondition Int     @db.SmallInt
  CodeFrais     Int     @db.TinyInt
  QteFrais      Int     @db.TinyInt
  UniteFrais    String  @db.VarChar(7)
  MontUnitaire  Decimal @db.Decimal(18, 0)
  Rembours      String  @db.VarChar(1)

  @@id([CodeCondition, CodeFrais])
}

model Tim_ConditionLocation {
  CodeCondition Int @db.SmallInt
  CodeLocation  Int

  @@id([CodeCondition, CodeLocation])
}

model Tim_Decaissement {
  CodeDecaissement Int      @id @default(autoincrement())
  CodeBon          Int
  MontantBon       Decimal  @db.Decimal(18, 0)
  DateSaisie       DateTime @db.DateTime(0)
  Operateur        String   @db.VarChar(10)
}

model Tim_DeductionLocataire {
  CodeBail Int
  Num      Int     @db.TinyInt
  Libelle  String  @db.VarChar(500)
  Qte      Int     @db.SmallInt
  Montant  Decimal @db.Decimal(18, 0)

  @@id([CodeBail, Num])
}

model Tim_DetailsBon {
  CodeDetails    Int     @id @default(autoincrement())
  CodeBon        Int
  CodePropriete  Int     @db.SmallInt
  CodeLocation   Int
  ImputLocataire BigInt
  CodeReparDegat Int
  MotifSortie    String  @db.VarChar(150)
  Montant        Decimal @db.Decimal(18, 0)
}

model Tim_DetailsMontantProprio {
  CodeDetails Int     @id @default(autoincrement())
  CodeMontant Int
  CodeBail    Int
  Libelle     String  @db.VarChar(150)
  Montant     Decimal @db.Decimal(18, 0)
}

model Tim_DroitEntree {
  CodeBail      Int
  CodeCondition Int     @db.SmallInt
  CodeFrais     Int     @db.TinyInt
  MontantTTC    Decimal @db.Decimal(18, 0)
  MontantOk     String  @db.VarChar(2)

  @@id([CodeBail, CodeCondition, CodeFrais])
}

model Tim_EtatAutresMontant {
  NumOrdre  Int     @id @default(autoincrement())
  Operateur String  @db.VarChar(10)
  DateMont  String  @db.VarChar(20)
  Libelle   String  @db.VarChar(200)
  Montant   Decimal @db.Decimal(18, 0)
}

model Tim_EtatRecouvrement {
  Num            Int     @id @db.TinyInt
  Operateur      String  @db.VarChar(10)
  Propriete      String  @db.VarChar(150)
  Location       String  @db.VarChar(100)
  Locataire      String  @db.VarChar(100)
  Contact        String  @db.VarChar(20)
  Loyer          Decimal @db.Decimal(18, 0)
  MontPercu      Decimal @db.Decimal(18, 0)
  MontPenalPercu Decimal @db.Decimal(18, 0)
  DatePaiement   String  @db.VarChar(100)
  MoisImpute     String  @db.VarChar(500)
  ProchainLoyer  String  @db.VarChar(100)
  Observation    String  @db.VarChar(150)
}

model Tim_Etats {
  CodeEtat        Int    @id @default(autoincrement())
  NomEtat         String @db.VarChar(50)
  CheminEtat      String @db.VarChar(50)
  TypeEtat        String @db.VarChar(20)
  pLocataireCible String @db.VarChar(1)
  pLocationCible  String @db.VarChar(1)
  pTypeLocation   String @db.VarChar(1)
  pTypeLocataire  String @db.VarChar(1)
  pNbPiece        String @db.VarChar(1)
  pNumEtage       String @db.VarChar(1)
  pSuperficie     String @db.VarChar(1)
  pLoyer          String @db.VarChar(1)
  pEtat           String @db.VarChar(1)
  pCommune        String @db.VarChar(1)
  pNationalite    String @db.VarChar(1)
}

model Tim_Frais {
  CodeFrais    Int    @id @default(autoincrement()) @db.TinyInt
  LibelleFrais String @db.VarChar(50)
}

model Tim_GroupeAuto {
  CodeGroupe     String   @id @db.VarChar(100)
  AttributGroupe String   @db.VarChar(1000)
  DeclenchGroupe String   @db.VarChar(5000)
  DateSaisie     DateTime @db.DateTime(0)
  DateModif      DateTime @db.DateTime(0)
  Operateur      String   @db.VarChar(10)
}

model Tim_ImageConstat {
  CodeReparDegat Int
  NomImage       String @db.VarChar(50)

  @@id([CodeReparDegat, NomImage])
}

model Tim_ImageLocation {
  CodeLocation Int
  NomImage     String @db.VarChar(20)

  @@id([CodeLocation, NomImage])
}

model Tim_ImagePropriete {
  CodePropriete Int    @db.SmallInt
  NomImage      String @db.VarChar(20)

  @@id([CodePropriete, NomImage])
}

model Tim_Location {
  CodeLocation      Int      @id @default(autoincrement())
  CodePropriete     Int      @db.SmallInt
  NomLocation       String   @db.VarChar(20)
  CodeTypeLocation  Int      @db.TinyInt
  NbrePiece         Int      @db.TinyInt
  NumEtage          Int      @db.TinyInt
  Superficie        Int      @db.SmallInt
  MontLoyerHT       Decimal  @db.Decimal(18, 0)
  MontTvaLoyer      Decimal  @db.Decimal(18, 0)
  TvaCharges        String   @db.VarChar(1)
  LoyerDefinitifTTC Decimal  @db.Decimal(18, 0)
  DateSaisie        DateTime @db.DateTime(0)
  DateModif         DateTime @db.DateTime(0)
  Operateur         String   @db.VarChar(10)
}

model Tim_LoyerPeriode {
  CodeBail   Int
  Periode    String  @db.VarChar(7)
  MontLoyer  Decimal @db.Decimal(18, 0)
  MontCharge Decimal @db.Decimal(18, 0)

  @@id([CodeBail, Periode])
}

model Tim_MajLoyer {
  CodeLocation Int
  DateMaj      DateTime @db.DateTime(0)
  AncLoyer     Decimal  @db.Decimal(18, 0)
  NouvLoyer    Decimal  @db.Decimal(18, 0)
  Operateur    String   @db.VarChar(10)

  @@id([CodeLocation, DateMaj])
}

model Tim_Menu {
  CodeMenu    Int    @id @default(autoincrement()) @db.SmallInt
  LibelleMenu String @db.VarChar(100)
}

model Tim_MenuForm {
  CodeForm     String @db.VarChar(3)
  CodeMenu     Int    @db.SmallInt
  LibelleForm  String @db.VarChar(100)
  DeclenchForm String @db.VarChar(50)

  @@id([CodeForm, CodeMenu])
}

model Tim_MontantProprio {
  CodeMontant   Int      @id @default(autoincrement())
  DateMontant   DateTime @db.DateTime(0)
  CodePropriete Int      @db.SmallInt
  Operateur     String   @db.VarChar(10)
}

model Tim_PaiementLoyer {
  CodeBail      Int
  CodeQuittance Int
  Periode       String  @db.VarChar(7)
  MontLoyer     Decimal @db.Decimal(18, 0)
  MontCharge    Decimal @db.Decimal(18, 0)
  Penalite      Decimal @db.Decimal(18, 0)

  @@id([CodeBail, CodeQuittance, Periode])
}

model Tim_ParametresGeneraux {
  CodeParam         Int    @id @default(autoincrement()) @db.TinyInt
  TVA               Int    @db.TinyInt
  Devise            String @db.VarChar(20)
  CycleLoyer        Int    @db.TinyInt
  PeriodeDebutPoint String @db.VarChar(7)
}

model Tim_Particulier {
  CodeParticulier  Int      @id @default(autoincrement())
  Civilite         String   @db.VarChar(4)
  Nom              String   @db.VarChar(35)
  Prenoms          String   @db.VarChar(60)
  DateNais         DateTime @db.DateTime(0)
  LieuNais         String   @db.VarChar(50)
  CodePieceId      String   @db.VarChar(5)
  NumPieceId       String   @db.VarChar(20)
  CodePays         Int      @db.TinyInt
  Fonction         String   @db.VarChar(50)
  Employeur        String   @db.VarChar(50)
  SitMatri         String   @db.VarChar(15)
  NbPersonne       Int      @db.TinyInt
  AncResidence     String   @db.VarChar(50)
  Indicatif        String   @db.VarChar(3)
  Contact          String   @db.VarChar(20)
  ObjetLocation    String   @db.VarChar(50)
  CodeModePaiement Int      @db.TinyInt
  RIB              String   @db.VarChar(50)
  CivUrg           String   @db.VarChar(4)
  NomPrenUrg       String   @db.VarChar(60)
  ContactUrg       String   @db.VarChar(20)
  ObservUrg        String   @db.VarChar(50)
}

model Tim_PointRecouvrement {
  Operateur String @db.VarChar(10)
  Libelle   String @db.VarChar(200)
  Totaux    String @db.VarChar(20)
  Prop1     String @db.VarChar(20)
  Prop2     String @db.VarChar(20)
  Prop3     String @db.VarChar(20)
  Prop4     String @db.VarChar(20)
  Prop5     String @db.VarChar(20)
  Prop6     String @db.VarChar(20)
  Prop7     String @db.VarChar(20)
  Prop8     String @db.VarChar(20)
  Prop9     String @db.VarChar(20)
  Prop10    String @db.VarChar(20)
  Prop11    String @db.VarChar(20)
  Prop12    String @db.VarChar(20)
  Prop13    String @db.VarChar(20)
  Prop14    String @db.VarChar(20)
  Prop15    String @db.VarChar(20)
  Prop16    String @db.VarChar(20)
  Prop17    String @db.VarChar(20)
  Prop18    String @db.VarChar(20)
  Prop19    String @db.VarChar(20)
  Prop20    String @db.VarChar(20)

  @@id([Operateur, Libelle])
}

model Tim_Professionnel {
  CodeEnt            Int      @id @default(autoincrement())
  RaisonSoc          String   @db.VarChar(100)
  CodeFormeJuridique String   @db.VarChar(4)
  NatureActivite     String   @db.VarChar(50)
  BpEnt              String   @db.VarChar(30)
  Indicatif          String   @db.VarChar(3)
  ContactEnt         String   @db.VarChar(20)
  Banque             String   @db.VarChar(50)
  NumCompte          String   @db.VarChar(25)
  CodeModePaiement   Int      @db.TinyInt
  CivGerant          String   @db.VarChar(4)
  NomGerant          String   @db.VarChar(35)
  PrenGerant         String   @db.VarChar(60)
  DateNaisGerant     DateTime @db.DateTime(0)
  LieuNaisGerant     String   @db.VarChar(50)
  CodePieceId        String   @db.VarChar(5)
  NumPieceId         String   @db.VarChar(20)
  CodePays           Int      @db.TinyInt
  SitMatri           String   @db.VarChar(20)
  BpGerant           String   @db.VarChar(30)
  AdresseGeo         String   @db.VarChar(50)
  ContactGerant      String   @db.VarChar(20)
  BanqueGerant       String   @db.VarChar(50)
  NumCompteGerant    String   @db.VarChar(25)
}

model Tim_Proprietaire {
  CodeProprio Int      @id @default(autoincrement()) @db.SmallInt
  Sexe        String   @db.VarChar(1)
  Civilite    String   @db.VarChar(5)
  Nom         String   @db.VarChar(25)
  Prenoms     String   @db.VarChar(60)
  DateNais    DateTime @db.DateTime(0)
  LieuNais    String   @db.VarChar(30)
  CodePieceId String   @db.VarChar(5)
  NumPieceId  String   @db.VarChar(20)
  CodePays    Int      @db.TinyInt
  AdresseComp String   @db.VarChar(150)
  Indicatif   String   @db.VarChar(3)
  Tel1        String   @db.VarChar(20)
  Tel2        String   @db.VarChar(20)
  Tel3        String   @db.VarChar(20)
  AbonneSms   String   @db.VarChar(1)
  RepEnt      String   @db.VarChar(1)
  RaisonSoc   String   @db.VarChar(50)
  SiegeSoc    String   @db.VarChar(50)
  AdresseEnt  String   @db.VarChar(50)
  TelEnt      String   @db.VarChar(20)
  DateSaisie  DateTime @db.DateTime(0)
  DateModif   DateTime @db.DateTime(0)
  Operateur   String   @db.VarChar(10)
}

model Tim_Propriete {
  CodePropriete     Int      @id @default(autoincrement()) @db.SmallInt
  CodeProprio       Int      @db.SmallInt
  NomPropriete      String   @db.VarChar(100)
  CodeTypePropriete Int      @db.TinyInt
  TauxPrestat       Int      @db.TinyInt
  CodeCommune       Int      @db.SmallInt
  Quartier          String   @db.VarChar(50)
  Localisation      String   @db.VarChar(150)
  DateSaisie        DateTime @db.DateTime(0)
  DateModif         DateTime @db.DateTime(0)
  Operateur         String   @db.VarChar(10)
}

model Tim_Quittance {
  CodeBail          Int
  CodeQuittance     Int
  MontantVerse      Decimal  @db.Decimal(18, 0)
  MontantReporte    Decimal  @db.Decimal(18, 0)
  ReliquatQuittance Decimal  @db.Decimal(18, 0)
  LibelleQuittance  String   @db.VarChar(50)
  CodeModePaiement  Int      @db.TinyInt
  RefPaiement       String   @db.VarChar(50)
  DateSaisie        DateTime @db.DateTime(0)
  Operateur         String   @db.VarChar(10)
  LieuOp            String   @db.VarChar(3)
  Sync              String   @db.VarChar(2)
  Contexte          String   @db.VarChar(9)

  @@id([CodeBail, CodeQuittance])
}

model Tim_Reliquat {
  CodeReliquat    Int      @id @default(autoincrement())
  CodeBail        Int
  CodeQuittance   Int
  LibelleReliquat String   @db.VarChar(50)
  MontantReliquat Decimal  @db.Decimal(18, 0)
  DateSaisie      DateTime @db.DateTime(0)
  Operateur       String   @db.VarChar(10)
}

model Tim_ReparDegat {
  CodeReparDegat Int       @id @default(autoincrement())
  CodePropriete  Int       @db.SmallInt
  CodeLocation   Int
  CodeDegat      String    @db.VarChar(20)
  LibelleDegat   String    @db.VarChar(100)
  AmpleurDegat   Int       @db.TinyInt
  DateConstat    DateTime  @db.DateTime(0)
  CoutReparation Decimal   @db.Decimal(18, 0)
  RespoTravaux   String    @db.VarChar(10)
  DateFinTravaux DateTime? @db.DateTime(0)
  PaiementOk     String    @db.VarChar(1)
  DateModif      DateTime  @db.DateTime(0)
  Operateur      String    @db.VarChar(10)
}

model Tim_SmsRappelLoyer {
  Periode       String   @db.VarChar(7)
  CodeBail      Int
  Contact       String   @db.VarChar(11)
  DateEnvoi     DateTime @db.DateTime(0)
  DelaiPaiement DateTime @db.DateTime(0)
  Statut        String   @db.VarChar(30)

  @@id([Periode, CodeBail])
}

model Tim_TypeDegat {
  CodeTypeDegat Int    @id @default(autoincrement()) @db.TinyInt
  LibelleType   String @db.VarChar(150)
}

model Tim_TypeLocation {
  CodeTypeLocation Int    @id @default(autoincrement()) @db.TinyInt
  LibelleType      String @db.VarChar(50)
}

model Tim_TypePropriete {
  CodeTypePropriete Int    @id @default(autoincrement()) @db.TinyInt
  LibelleType       String @db.VarChar(50)
}

model Tim_Virement {
  CodeVirement  Int      @id @default(autoincrement()) @db.SmallInt
  DateVirement  DateTime @db.DateTime(0)
  TypeVirement  String   @db.VarChar(2)
  CaisseProv    String   @db.VarChar(10)
  CaisseDest    String   @db.VarChar(10)
  Montant       Decimal  @db.Decimal(18, 0)
  RespoVirement String   @db.VarChar(10)
  Operateur     String   @db.VarChar(10)
}
